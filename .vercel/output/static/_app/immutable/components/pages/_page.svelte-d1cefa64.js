import{S as X,i as H,s as C,l as w,m as I,J as F,q as v,K as S,b as L,L as ue,M as D,n as O,h as m,N as Y,O as j,C as _e,p as E,D as he,E as de,F as me,f as b,t as p,o as re,P as ge,x as P,y as M,Q as ve,z as U,A as q,e as V,g as B,d as G,R as be,a as N,c as A,H as T,T as ke,U as J,V as Q,W as pe,X as ye,u as we,v as Ie}from"../../chunks/index-46cd8f91.js";import{S as Ee}from"../../chunks/Spinner-d468d9cd.js";function Le(o){let e,s,l,t;return{c(){e=w("img"),this.h()},l(r){e=I(r,"IMG",{src:!0,style:!0,class:!0}),this.h()},h(){F(e.src,s=o[0])||v(e,"src",s),v(e,"style",o[1]),v(e,"class","svelte-es9wde"),S(e,"loaded",o[2])},m(r,n){L(r,e,n),l||(t=[ue(o[3].call(null,e)),D(e,"click",o[5])],l=!0)},p(r,[n]){n&1&&!F(e.src,s=r[0])&&v(e,"src",s),n&2&&v(e,"style",r[1]),n&4&&S(e,"loaded",r[2])},i:O,o:O,d(r){r&&m(e),l=!1,Y(t)}}}function De(o,e,s){let{src:l}=e,{style:t=""}=e,{afterLoaded:r=()=>{}}=e,n=!1;function i(_){_.complete?(s(2,n=!0),r(_)):_.onload=()=>{s(2,n=!0),r(_)}}function c(_){j.call(this,o,_)}return o.$$set=_=>{"src"in _&&s(0,l=_.src),"style"in _&&s(1,t=_.style),"afterLoaded"in _&&s(4,r=_.afterLoaded)},[l,t,n,i,r,c]}class oe extends X{constructor(e){super(),H(this,e,De,Le,C,{src:0,style:1,afterLoaded:4})}}const Te=o=>({intersecting:o&1}),Z=o=>({intersecting:o[0]});function Oe(o){let e,s;const l=o[8].default,t=_e(l,o,o[7],Z);return{c(){e=w("div"),t&&t.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var n=E(e);t&&t.l(n),n.forEach(m),this.h()},h(){v(e,"class","svelte-1kuj9kb")},m(r,n){L(r,e,n),t&&t.m(e,null),o[9](e),s=!0},p(r,[n]){t&&t.p&&(!s||n&129)&&he(t,l,r,r[7],s?me(l,r[7],n,Te):de(r[7]),Z)},i(r){s||(b(t,r),s=!0)},o(r){p(t,r),s=!1},d(r){r&&m(e),t&&t.d(r),o[9](null)}}}function Se(o,e,s){let{$$slots:l={},$$scope:t}=e,{once:r=!1}=e,{top:n=0}=e,{bottom:i=0}=e,{left:c=0}=e,{right:_=0}=e,k=!1,h;re(()=>{if(typeof IntersectionObserver<"u"){const u=`${i}px ${c}px ${n}px ${_}px`,g=new IntersectionObserver(y=>{s(0,k=y[0].isIntersecting),k&&r&&g.unobserve(h)},{rootMargin:u});return g.observe(h),()=>g.unobserve(h)}function a(){const u=h.getBoundingClientRect();s(0,k=u.bottom+i>0&&u.right+_>0&&u.top-n<window.innerHeight&&u.left-c<window.innerWidth),k&&r&&window.removeEventListener("scroll",a)}return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)});function f(a){ge[a?"unshift":"push"](()=>{h=a,s(1,h)})}return o.$$set=a=>{"once"in a&&s(2,r=a.once),"top"in a&&s(3,n=a.top),"bottom"in a&&s(4,i=a.bottom),"left"in a&&s(5,c=a.left),"right"in a&&s(6,_=a.right),"$$scope"in a&&s(7,t=a.$$scope)},[k,h,r,n,i,c,_,t,l,f]}class Ve extends X{constructor(e){super(),H(this,e,Se,Oe,C,{once:2,top:3,bottom:4,left:5,right:6})}}function x(o){let e,s;return e=new oe({props:{src:o[0]}}),{c(){P(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,t){U(e,l,t),s=!0},p(l,t){const r={};t&1&&(r.src=l[0]),e.$set(r)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){q(e,l)}}}function Ne(o){let e,s,l=o[3]&&x(o);return{c(){l&&l.c(),e=V()},l(t){l&&l.l(t),e=V()},m(t,r){l&&l.m(t,r),L(t,e,r),s=!0},p(t,r){t[3]?l?(l.p(t,r),r&8&&b(l,1)):(l=x(t),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(B(),p(l,1,1,()=>{l=null}),G())},i(t){s||(b(l),s=!0)},o(t){p(l),s=!1},d(t){l&&l.d(t),t&&m(e)}}}function Ae(o){let e,s,l,t,r;return s=new Ve({props:{once:!0,$$slots:{default:[Ne,({intersecting:n})=>({3:n}),({intersecting:n})=>n?8:0]},$$scope:{ctx:o}}}),{c(){e=w("div"),P(s.$$.fragment),this.h()},l(n){e=I(n,"DIV",{"data-test":!0,class:!0,style:!0});var i=E(e);M(s.$$.fragment,i),i.forEach(m),this.h()},h(){v(e,"data-test","thumbnail"),v(e,"class",ve("thumbnail ")+" svelte-1w4dko7"),v(e,"style",o[1])},m(n,i){L(n,e,i),U(s,e,null),l=!0,t||(r=D(e,"click",o[2]),t=!0)},p(n,[i]){const c={};i&25&&(c.$$scope={dirty:i,ctx:n}),s.$set(c),(!l||i&2)&&v(e,"style",n[1])},i(n){l||(b(s.$$.fragment,n),l=!0)},o(n){p(s.$$.fragment,n),l=!1},d(n){n&&m(e),q(s),t=!1,r()}}}function Ce(o,e,s){let{url:l,style:t=""}=e;function r(n){j.call(this,o,n)}return o.$$set=n=>{"url"in n&&s(0,l=n.url),"style"in n&&s(1,t=n.style)},[l,t,r]}class Pe extends X{constructor(e){super(),H(this,e,Ce,Ae,C,{url:0,style:1})}}const{window:R}=ke;function $(o){let e,s;return e=new Ee({props:{style:`
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
  `}}),{c(){P(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,t){U(e,l,t),s=!0},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){q(e,l)}}}function ee(o){let e,s,l,t,r,n,i,c,_,k;return{c(){e=w("span"),s=w("div"),l=w("ion-icon"),t=N(),r=w("div"),n=N(),i=w("div"),c=w("ion-icon"),this.h()},l(h){e=I(h,"SPAN",{class:!0});var f=E(e);s=I(f,"DIV",{class:!0});var a=E(s);l=I(a,"ION-ICON",{name:!0}),E(l).forEach(m),a.forEach(m),t=A(f),r=I(f,"DIV",{class:!0}),E(r).forEach(m),n=A(f),i=I(f,"DIV",{class:!0});var u=E(i);c=I(u,"ION-ICON",{name:!0}),E(c).forEach(m),u.forEach(m),f.forEach(m),this.h()},h(){J(l,"name","caret-back-outline"),v(s,"class","icon control svelte-1ha5rvk"),v(r,"class","control details svelte-1ha5rvk"),J(c,"name","caret-forward-outline"),v(i,"class","icon control svelte-1ha5rvk"),v(e,"class","svelte-1ha5rvk"),S(e,"controls",o[5])},m(h,f){L(h,e,f),T(e,s),T(s,l),T(e,t),T(e,r),T(e,n),T(e,i),T(i,c),_||(k=[D(s,"click",function(){Q(K(o[3]))&&K(o[3]).apply(this,arguments)}),D(i,"click",function(){Q(K(o[4]))&&K(o[4]).apply(this,arguments)}),D(e,"click",W)],_=!0)},p(h,f){o=h,f&32&&S(e,"controls",o[5])},d(h){h&&m(e),_=!1,Y(k)}}}function Me(o){let e=!1,s=()=>{e=!1},l,t,r,n,i,c,_,k,h;be(o[14]);let f=o[7]&&$();n=new oe({props:{style:`
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      border: 8px solid var(--border-color);
      ${o[1]?"cursor: pointer;":""} 
    `,afterLoaded:o[8],src:o[0]}}),n.$on("click",o[15]);let a=o[1]&&ee(o);return{c(){t=w("div"),f&&f.c(),r=N(),P(n.$$.fragment),i=N(),c=w("div"),a&&a.c(),this.h()},l(u){t=I(u,"DIV",{class:!0,"data-test":!0});var g=E(t);f&&f.l(g),r=A(g),M(n.$$.fragment,g),g.forEach(m),i=A(u),c=I(u,"DIV",{class:!0});var y=E(c);a&&a.l(y),y.forEach(m),this.h()},h(){v(t,"class","overlay top svelte-1ha5rvk"),v(t,"data-test","lightbox"),S(t,"radial",o[2]),v(c,"class","overlay bottom svelte-1ha5rvk")},m(u,g){L(u,t,g),f&&f.m(t,null),T(t,r),U(n,t,null),L(u,i,g),L(u,c,g),a&&a.m(c,null),_=!0,k||(h=[D(R,"keydown",o[12]),D(R,"popstate",o[9]),D(R,"scroll",()=>{e=!0,clearTimeout(l),l=setTimeout(s,100),o[14]()}),D(t,"click",W),D(t,"touchstart",o[10]),D(t,"touchend",o[11]),D(c,"click",W)],k=!0)},p(u,[g]){g&64&&!e&&(e=!0,clearTimeout(l),scrollTo(R.pageXOffset,u[6]),l=setTimeout(s,100)),u[7]?f?g&128&&b(f,1):(f=$(),f.c(),b(f,1),f.m(t,r)):f&&(B(),p(f,1,1,()=>{f=null}),G());const y={};g&2&&(y.style=`
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      border: 8px solid var(--border-color);
      ${u[1]?"cursor: pointer;":""} 
    `),g&1&&(y.src=u[0]),n.$set(y),g&4&&S(t,"radial",u[2]),u[1]?a?a.p(u,g):(a=ee(u),a.c(),a.m(c,null)):a&&(a.d(1),a=null)},i(u){_||(b(f),b(n.$$.fragment,u),_=!0)},o(u){p(f),p(n.$$.fragment,u),_=!1},d(u){u&&m(t),f&&f.d(),q(n),u&&m(i),u&&m(c),a&&a.d(),k=!1,Y(h)}}}function W(){window.dispatchEvent(new Event("popstate"))}function Ue(o,e){o.style.position="static",o.style.top="",o.style.right="",o.style.left="",window.scrollTo(0,e)}function K(o){return function(s){s.stopPropagation(),s.preventDefault(),o()}}function qe(o,e,s){let{url:l,close:t,click:r,radial:n}=e,{previous:i=()=>{}}=e,{next:c=()=>{}}=e,_=0,k=!1,h,f=!0;const a=()=>{s(5,k=!0),s(7,f=!1)};re(()=>{const d=document.querySelector("main"),z=d?g(d):null;return history.pushState({id:"modal"},"modal"),()=>{d&&z&&Ue(d,z)}});function u(d){d.preventDefault(),d.stopPropagation(),t()}function g(d){return d.style.position="fixed",d.style.top=-1*h+"px",d.style.right="0",d.style.left="0",h}function y({changedTouches:d}){_=d[0].screenX}function ie({changedTouches:d}){const z=d[0].screenX;z+100<_&&c(),z-100>_&&i()}function ce(d){switch(d.key){case"Escape":W();break;case"Left":case"ArrowLeft":i();break;case"Right":case"ArrowRight":c();break}}function ae(){s(6,h=R.pageYOffset)}function fe(d){j.call(this,o,d)}return o.$$set=d=>{"url"in d&&s(0,l=d.url),"close"in d&&s(13,t=d.close),"click"in d&&s(1,r=d.click),"radial"in d&&s(2,n=d.radial),"previous"in d&&s(3,i=d.previous),"next"in d&&s(4,c=d.next)},[l,r,n,i,c,k,h,f,a,u,y,ie,ce,t,ae,fe]}class ze extends X{constructor(e){super(),H(this,e,qe,Me,C,{url:0,close:13,click:1,radial:2,previous:3,next:4})}}function te(o,e,s){const l=o.slice();return l[8]=e[s],l[10]=s,l}function Re(o){let e,s,l=o[2],t=[];for(let n=0;n<l.length;n+=1)t[n]=le(te(o,l,n));const r=n=>p(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=V()},l(n){for(let i=0;i<t.length;i+=1)t[i].l(n);e=V()},m(n,i){for(let c=0;c<t.length;c+=1)t[c].m(n,i);L(n,e,i),s=!0},p(n,i){if(i&5){l=n[2];let c;for(c=0;c<l.length;c+=1){const _=te(n,l,c);t[c]?(t[c].p(_,i),b(t[c],1)):(t[c]=le(_),t[c].c(),b(t[c],1),t[c].m(e.parentNode,e))}for(B(),c=l.length;c<t.length;c+=1)r(c);G()}},i(n){if(!s){for(let i=0;i<l.length;i+=1)b(t[i]);s=!0}},o(n){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)p(t[i]);s=!1},d(n){ye(t,n),n&&m(e)}}}function Xe(o){let e,s;return{c(){e=w("h5"),s=we("I thought I had more photos than this...")},l(l){e=I(l,"H5",{});var t=E(e);s=Ie(t,"I thought I had more photos than this..."),t.forEach(m)},m(l,t){L(l,e,t),T(e,s)},p:O,i:O,o:O,d(l){l&&m(e)}}}function le(o){var t;let e,s;function l(...r){return o[4](o[10],...r)}return e=new Pe({props:{url:(t=o[8])==null?void 0:t.thumbUrl}}),e.$on("click",l),{c(){P(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,n){U(e,r,n),s=!0},p(r,n){o=r},i(r){s||(b(e.$$.fragment,r),s=!0)},o(r){p(e.$$.fragment,r),s=!1},d(r){q(e,r)}}}function ne(o){var r;let e=(r=o[1])==null?void 0:r.fullsizeUrl,s,l,t=se(o);return{c(){t.c(),s=V()},l(n){t.l(n),s=V()},m(n,i){t.m(n,i),L(n,s,i),l=!0},p(n,i){var c;i&2&&C(e,e=(c=n[1])==null?void 0:c.fullsizeUrl)?(B(),p(t,1,1,O),G(),t=se(n),t.c(),b(t,1),t.m(s.parentNode,s)):t.p(n,i)},i(n){l||(b(t),l=!0)},o(n){p(t),l=!1},d(n){n&&m(s),t.d(n)}}}function se(o){let e,s;return e=new ze({props:{click:!0,radial:!0,url:o[1].fullsizeUrl,close:o[5],next:o[6],previous:o[7]}}),{c(){P(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,t){U(e,l,t),s=!0},p(l,t){const r={};t&2&&(r.url=l[1].fullsizeUrl),t&1&&(r.close=l[5]),t&1&&(r.next=l[6]),t&1&&(r.previous=l[7]),e.$set(r)},i(l){s||(b(e.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),s=!1},d(l){q(e,l)}}}function He(o){let e,s,l,t,r,n,i,c;const _=[Xe,Re],k=[];function h(a,u){return!a[2]||!a[2].length?0:1}r=h(o),n=k[r]=_[r](o);let f=o[1]&&ne(o);return{c(){e=w("meta"),s=N(),l=w("div"),t=w("div"),n.c(),i=N(),f&&f.c(),this.h()},l(a){const u=pe('[data-svelte="svelte-1inhs9v"]',document.head);e=I(u,"META",{name:!0,content:!0}),u.forEach(m),s=A(a),l=I(a,"DIV",{class:!0});var g=E(l);t=I(g,"DIV",{class:!0,"data-test":!0});var y=E(t);n.l(y),i=A(y),f&&f.l(y),y.forEach(m),g.forEach(m),this.h()},h(){document.title="MTP:Gallery",v(e,"name","description"),v(e,"content","A selection of my favourite images."),v(t,"class","gallery svelte-p327c5"),v(t,"data-test","gallery"),v(l,"class","page svelte-p327c5")},m(a,u){T(document.head,e),L(a,s,u),L(a,l,u),T(l,t),k[r].m(t,null),T(t,i),f&&f.m(t,null),c=!0},p(a,[u]){n.p(a,u),a[1]?f?(f.p(a,u),u&2&&b(f,1)):(f=ne(a),f.c(),b(f,1),f.m(t,null)):f&&(B(),p(f,1,1,()=>{f=null}),G())},i(a){c||(b(n),b(f),c=!0)},o(a){p(n),p(f),c=!1},d(a){m(e),a&&m(s),a&&m(l),k[r].d(),f&&f.d()}}}function Be(o,e,s){let l,{data:t}=e;const r=t==null?void 0:t.photos;let n;const i=(h,f)=>{f.preventDefault(),s(0,n=h)},c=()=>s(0,n=-1),_=()=>s(0,n=n===(r==null?void 0:r.length)?0:n+1),k=()=>{var h;return s(0,n=n===0?(h=r==null?void 0:r.length)!=null?h:0-1:n-1)};return o.$$set=h=>{"data"in h&&s(3,t=h.data)},o.$$.update=()=>{o.$$.dirty&1&&s(1,l=r==null?void 0:r[n])},[n,l,r,t,i,c,_,k]}class We extends X{constructor(e){super(),H(this,e,Be,He,C,{data:3})}}export{We as default};
