import{n as _e,s as Be,S as We,i as He,a as Fe,e as U,c as Ge,b as z,g as J,t as A,d as W,f as O,h as j,j as Ye,k as Me,o as we,l as Xe,m as Ze,p as Qe,q as pe,r as H,u as xe,v as et,w as tt,x as D,y as M,z as C,A as V,B as Pe}from"./chunks/index-46cd8f91.js";import{H as he,R as Ie,e as nt}from"./chunks/index-297b380d.js";const Q=[];function se(s,e=_e){let n;const o=new Set;function r(a){if(Be(s,a)&&(s=a,n)){const i=!Q.length;for(const l of o)l[1](),Q.push(l,s);if(i){for(let l=0;l<Q.length;l+=2)Q[l][0](Q[l+1]);Q.length=0}}}function f(a){r(a(s))}function t(a,i=_e){const l=[a,i];return o.add(l),o.size===1&&(n=e(r)||_e),a(s),()=>{o.delete(l),o.size===0&&(n(),n=null)}}return{set:r,update:f,subscribe:t}}function rt(s,e){return s==="/"||e==="ignore"?s:e==="never"?s.endsWith("/")?s.slice(0,-1):s:e==="always"&&!s.endsWith("/")?s+"/":s}function st(s){for(const e in s)s[e]=s[e].replace(/%23/g,"#").replace(/%3[Bb]/g,";").replace(/%2[Cc]/g,",").replace(/%2[Ff]/g,"/").replace(/%3[Ff]/g,"?").replace(/%3[Aa]/g,":").replace(/%40/g,"@").replace(/%26/g,"&").replace(/%3[Dd]/g,"=").replace(/%2[Bb]/g,"+").replace(/%24/g,"$");return s}class at extends URL{get hash(){throw new Error("url.hash is inaccessible from load. Consider accessing hash from the page store within the script tag of your component.")}}let Ne="",Ke="";function it(s){Ne=s.base,Ke=s.assets||Ne}function Te(s){let e=s.baseURI;if(!e){const n=s.getElementsByTagName("base");e=n.length?n[0].href:s.URL}return e}function be(){return{x:pageXOffset,y:pageYOffset}}function je(s){return s.composedPath().find(n=>n instanceof Node&&n.nodeName.toUpperCase()==="A")}function De(s){return s instanceof SVGAElement?new URL(s.href.baseVal,document.baseURI):new URL(s.href)}function Ce(s){const e=se(s);let n=!0;function o(){n=!0,e.update(t=>t)}function r(t){n=!1,e.set(t)}function f(t){let a;return e.subscribe(i=>{(a===void 0||n&&i!==a)&&t(a=i)})}return{notify:o,set:r,subscribe:f}}function ot(){const{set:s,subscribe:e}=se(!1);let n;async function o(){clearTimeout(n);const r=await fetch(`${Ke}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(r.ok){const{version:f}=await r.json(),t=f!=="1661705722441";return t&&(s(!0),clearTimeout(n)),t}else throw new Error(`Version check failed: ${r.status}`)}return{subscribe:e,check:o}}function ct(s){let e=5381,n=s.length;if(typeof s=="string")for(;n;)e=e*33^s.charCodeAt(--n);else for(;n;)e=e*33^s[--n];return(e>>>0).toString(36)}const ve=window.fetch;function lt(s,e){let o=`script[sveltekit\\:data-type="data"][sveltekit\\:data-url=${JSON.stringify(typeof s=="string"?s:s.url)}]`;e&&typeof e.body=="string"&&(o+=`[sveltekit\\:data-body="${ct(e.body)}"]`);const r=document.querySelector(o);if(r&&r.textContent){const{body:f,...t}=JSON.parse(r.textContent);return Promise.resolve(new Response(f,t))}return ve(s,e)}const ft=/^(\.\.\.)?(\w+)(?:=(\w+))?$/;function ut(s){const e=[],n=[];let o=!0;return{pattern:s===""?/^\/$/:new RegExp(`^${decodeURIComponent(s).split(/(?:@[a-zA-Z0-9_-]+)?(?:\/|$)/).map((f,t,a)=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(f);if(i)return e.push(i[1]),n.push(i[2]),"(?:/(.*))?";const l=t===a.length-1;return f&&"/"+f.split(/\[(.+?)\]/).map((h,k)=>{if(k%2){const P=ft.exec(h);if(!P)throw new Error(`Invalid param: ${h}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,B,R,te]=P;return e.push(R),n.push(te),B?"(.*?)":"([^/]+?)"}return l&&h.includes(".")&&(o=!1),h.normalize().replace(/%5[Bb]/g,"[").replace(/%5[Dd]/g,"]").replace(/#/g,"%23").replace(/\?/g,"%3F").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).join("")}).join("")}${o?"/?":""}$`),names:e,types:n}}function dt(s,e,n,o){const r={};for(let f=0;f<e.length;f+=1){const t=e[f],a=n[f],i=s[f+1]||"";if(a){const l=o[a];if(!l)throw new Error(`Missing "${a}" param matcher`);if(!l(i))return}r[t]=i}return r}function _t(s,e,n){return Object.entries(e).map(([o,[r,f,t,a]])=>{const{pattern:i,names:l,types:h}=ut(o),k={id:o,exec:P=>{const B=i.exec(P);if(B)return dt(B,l,h,n)},errors:r.map(P=>s[P]),layouts:f.map(P=>s[P]),leaf:s[t],uses_server_data:!!a};return k.errors.length=k.layouts.length=Math.max(k.errors.length,k.layouts.length),k})}function pt(s){let e,n,o;var r=s[0][0];function f(t){return{props:{data:t[1],errors:t[5]}}}return r&&(e=new r(f(s))),{c(){e&&D(e.$$.fragment),n=U()},l(t){e&&M(e.$$.fragment,t),n=U()},m(t,a){e&&C(e,t,a),z(t,n,a),o=!0},p(t,a){const i={};if(a&2&&(i.data=t[1]),a&32&&(i.errors=t[5]),r!==(r=t[0][0])){if(e){J();const l=e;A(l.$$.fragment,1,0,()=>{V(l,1)}),W()}r?(e=new r(f(t)),D(e.$$.fragment),O(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&O(e.$$.fragment,t),o=!0)},o(t){e&&A(e.$$.fragment,t),o=!1},d(t){t&&j(n),e&&V(e,t)}}}function ht(s){let e,n,o;var r=s[0][0];function f(t){return{props:{data:t[1],$$slots:{default:[$t]},$$scope:{ctx:t}}}}return r&&(e=new r(f(s))),{c(){e&&D(e.$$.fragment),n=U()},l(t){e&&M(e.$$.fragment,t),n=U()},m(t,a){e&&C(e,t,a),z(t,n,a),o=!0},p(t,a){const i={};if(a&2&&(i.data=t[1]),a&2109&&(i.$$scope={dirty:a,ctx:t}),r!==(r=t[0][0])){if(e){J();const l=e;A(l.$$.fragment,1,0,()=>{V(l,1)}),W()}r?(e=new r(f(t)),D(e.$$.fragment),O(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&O(e.$$.fragment,t),o=!0)},o(t){e&&A(e.$$.fragment,t),o=!1},d(t){t&&j(n),e&&V(e,t)}}}function mt(s){let e,n,o;var r=s[0][1];function f(t){return{props:{data:t[2],errors:t[5]}}}return r&&(e=new r(f(s))),{c(){e&&D(e.$$.fragment),n=U()},l(t){e&&M(e.$$.fragment,t),n=U()},m(t,a){e&&C(e,t,a),z(t,n,a),o=!0},p(t,a){const i={};if(a&4&&(i.data=t[2]),a&32&&(i.errors=t[5]),r!==(r=t[0][1])){if(e){J();const l=e;A(l.$$.fragment,1,0,()=>{V(l,1)}),W()}r?(e=new r(f(t)),D(e.$$.fragment),O(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&O(e.$$.fragment,t),o=!0)},o(t){e&&A(e.$$.fragment,t),o=!1},d(t){t&&j(n),e&&V(e,t)}}}function gt(s){let e,n,o;var r=s[0][1];function f(t){return{props:{data:t[2],$$slots:{default:[yt]},$$scope:{ctx:t}}}}return r&&(e=new r(f(s))),{c(){e&&D(e.$$.fragment),n=U()},l(t){e&&M(e.$$.fragment,t),n=U()},m(t,a){e&&C(e,t,a),z(t,n,a),o=!0},p(t,a){const i={};if(a&4&&(i.data=t[2]),a&2105&&(i.$$scope={dirty:a,ctx:t}),r!==(r=t[0][1])){if(e){J();const l=e;A(l.$$.fragment,1,0,()=>{V(l,1)}),W()}r?(e=new r(f(t)),D(e.$$.fragment),O(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&O(e.$$.fragment,t),o=!0)},o(t){e&&A(e.$$.fragment,t),o=!1},d(t){t&&j(n),e&&V(e,t)}}}function wt(s){let e,n,o;var r=s[0][2];function f(t){return{props:{data:t[3],errors:t[5]}}}return r&&(e=new r(f(s))),{c(){e&&D(e.$$.fragment),n=U()},l(t){e&&M(e.$$.fragment,t),n=U()},m(t,a){e&&C(e,t,a),z(t,n,a),o=!0},p(t,a){const i={};if(a&8&&(i.data=t[3]),a&32&&(i.errors=t[5]),r!==(r=t[0][2])){if(e){J();const l=e;A(l.$$.fragment,1,0,()=>{V(l,1)}),W()}r?(e=new r(f(t)),D(e.$$.fragment),O(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&O(e.$$.fragment,t),o=!0)},o(t){e&&A(e.$$.fragment,t),o=!1},d(t){t&&j(n),e&&V(e,t)}}}function bt(s){let e,n,o;var r=s[0][2];function f(t){return{props:{data:t[3],$$slots:{default:[vt]},$$scope:{ctx:t}}}}return r&&(e=new r(f(s))),{c(){e&&D(e.$$.fragment),n=U()},l(t){e&&M(e.$$.fragment,t),n=U()},m(t,a){e&&C(e,t,a),z(t,n,a),o=!0},p(t,a){const i={};if(a&8&&(i.data=t[3]),a&2065&&(i.$$scope={dirty:a,ctx:t}),r!==(r=t[0][2])){if(e){J();const l=e;A(l.$$.fragment,1,0,()=>{V(l,1)}),W()}r?(e=new r(f(t)),D(e.$$.fragment),O(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&O(e.$$.fragment,t),o=!0)},o(t){e&&A(e.$$.fragment,t),o=!1},d(t){t&&j(n),e&&V(e,t)}}}function vt(s){let e,n,o;var r=s[0][3];function f(t){return{props:{data:t[4]}}}return r&&(e=new r(f(s))),{c(){e&&D(e.$$.fragment),n=U()},l(t){e&&M(e.$$.fragment,t),n=U()},m(t,a){e&&C(e,t,a),z(t,n,a),o=!0},p(t,a){const i={};if(a&16&&(i.data=t[4]),r!==(r=t[0][3])){if(e){J();const l=e;A(l.$$.fragment,1,0,()=>{V(l,1)}),W()}r?(e=new r(f(t)),D(e.$$.fragment),O(e.$$.fragment,1),C(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&O(e.$$.fragment,t),o=!0)},o(t){e&&A(e.$$.fragment,t),o=!1},d(t){t&&j(n),e&&V(e,t)}}}function yt(s){let e,n,o,r;const f=[bt,wt],t=[];function a(i,l){return i[0][3]?0:1}return e=a(s),n=t[e]=f[e](s),{c(){n.c(),o=U()},l(i){n.l(i),o=U()},m(i,l){t[e].m(i,l),z(i,o,l),r=!0},p(i,l){let h=e;e=a(i),e===h?t[e].p(i,l):(J(),A(t[h],1,1,()=>{t[h]=null}),W(),n=t[e],n?n.p(i,l):(n=t[e]=f[e](i),n.c()),O(n,1),n.m(o.parentNode,o))},i(i){r||(O(n),r=!0)},o(i){A(n),r=!1},d(i){t[e].d(i),i&&j(o)}}}function $t(s){let e,n,o,r;const f=[gt,mt],t=[];function a(i,l){return i[0][2]?0:1}return e=a(s),n=t[e]=f[e](s),{c(){n.c(),o=U()},l(i){n.l(i),o=U()},m(i,l){t[e].m(i,l),z(i,o,l),r=!0},p(i,l){let h=e;e=a(i),e===h?t[e].p(i,l):(J(),A(t[h],1,1,()=>{t[h]=null}),W(),n=t[e],n?n.p(i,l):(n=t[e]=f[e](i),n.c()),O(n,1),n.m(o.parentNode,o))},i(i){r||(O(n),r=!0)},o(i){A(n),r=!1},d(i){t[e].d(i),i&&j(o)}}}function Ve(s){let e,n=s[7]&&qe(s);return{c(){e=Xe("div"),n&&n.c(),this.h()},l(o){e=Ze(o,"DIV",{id:!0,"aria-live":!0,"aria-atomic":!0,style:!0});var r=Qe(e);n&&n.l(r),r.forEach(j),this.h()},h(){pe(e,"id","svelte-announcer"),pe(e,"aria-live","assertive"),pe(e,"aria-atomic","true"),H(e,"position","absolute"),H(e,"left","0"),H(e,"top","0"),H(e,"clip","rect(0 0 0 0)"),H(e,"clip-path","inset(50%)"),H(e,"overflow","hidden"),H(e,"white-space","nowrap"),H(e,"width","1px"),H(e,"height","1px")},m(o,r){z(o,e,r),n&&n.m(e,null)},p(o,r){o[7]?n?n.p(o,r):(n=qe(o),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(o){o&&j(e),n&&n.d()}}}function qe(s){let e;return{c(){e=xe(s[8])},l(n){e=et(n,s[8])},m(n,o){z(n,e,o)},p(n,o){o&256&&tt(e,n[8])},d(n){n&&j(e)}}}function kt(s){let e,n,o,r,f;const t=[ht,pt],a=[];function i(h,k){return h[0][1]?0:1}e=i(s),n=a[e]=t[e](s);let l=s[6]&&Ve(s);return{c(){n.c(),o=Fe(),l&&l.c(),r=U()},l(h){n.l(h),o=Ge(h),l&&l.l(h),r=U()},m(h,k){a[e].m(h,k),z(h,o,k),l&&l.m(h,k),z(h,r,k),f=!0},p(h,[k]){let P=e;e=i(h),e===P?a[e].p(h,k):(J(),A(a[P],1,1,()=>{a[P]=null}),W(),n=a[e],n?n.p(h,k):(n=a[e]=t[e](h),n.c()),O(n,1),n.m(o.parentNode,o)),h[6]?l?l.p(h,k):(l=Ve(h),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},i(h){f||(O(n),f=!0)},o(h){A(n),f=!1},d(h){a[e].d(h),h&&j(o),l&&l.d(h),h&&j(r)}}}function Et(s,e,n){let{stores:o}=e,{page:r}=e,{components:f}=e,{data_0:t=null}=e,{data_1:a=null}=e,{data_2:i=null}=e,{data_3:l=null}=e,{errors:h}=e;Ye("__svelte__",o),Me(o.page.notify);let k=!1,P=!1,B=null;return we(()=>{const R=o.page.subscribe(()=>{k&&(n(7,P=!0),n(8,B=document.title||"untitled page"))});return n(6,k=!0),R}),s.$$set=R=>{"stores"in R&&n(9,o=R.stores),"page"in R&&n(10,r=R.page),"components"in R&&n(0,f=R.components),"data_0"in R&&n(1,t=R.data_0),"data_1"in R&&n(2,a=R.data_1),"data_2"in R&&n(3,i=R.data_2),"data_3"in R&&n(4,l=R.data_3),"errors"in R&&n(5,h=R.errors)},s.$$.update=()=>{s.$$.dirty&1536&&o.page.set(r)},[f,t,a,i,l,h,k,P,B,o,r]}class Rt extends We{constructor(e){super(),He(this,e,Et,kt,Be,{stores:9,page:10,components:0,data_0:1,data_1:2,data_2:3,data_3:4,errors:5})}}const Lt=function(){const e=document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),St=function(s){return"/"+s},ze={},G=function(e,n,o){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=St(r),r in ze)return;ze[r]=!0;const f=r.endsWith(".css"),t=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${t}`))return;const a=document.createElement("link");if(a.rel=f?"stylesheet":Lt,f||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),f)return new Promise((i,l)=>{a.addEventListener("load",i),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},Ut={},ae=[()=>G(()=>import("./chunks/0-030930a1.js"),["_app/immutable/chunks/0-030930a1.js","_app/immutable/components/pages/_layout.svelte-c4828c6c.js","_app/immutable/assets/+layout-d3a8ddc6.css","_app/immutable/chunks/index-46cd8f91.js"]),()=>G(()=>import("./chunks/1-f4fcfb84.js"),["_app/immutable/chunks/1-f4fcfb84.js","_app/immutable/components/error.svelte-1d1be145.js","_app/immutable/chunks/index-46cd8f91.js"]),()=>G(()=>import("./chunks/2-696180ad.js"),["_app/immutable/chunks/2-696180ad.js","_app/immutable/components/pages/admin/_layout.svelte-8c287eba.js","_app/immutable/assets/+layout-9d62e9bb.css","_app/immutable/chunks/index-46cd8f91.js"]),()=>G(()=>import("./chunks/3-b101f3f7.js"),["_app/immutable/chunks/3-b101f3f7.js","_app/immutable/components/pages/_page.svelte-d1cefa64.js","_app/immutable/assets/+page-3e66e23d.css","_app/immutable/chunks/index-46cd8f91.js","_app/immutable/chunks/Spinner-d468d9cd.js","_app/immutable/assets/Spinner-d42269c0.css"]),()=>G(()=>import("./chunks/4-9755de0d.js"),["_app/immutable/chunks/4-9755de0d.js","_app/immutable/chunks/_page-2570c3e2.js","_app/immutable/chunks/index-297b380d.js","_app/immutable/components/pages/admin/_page.svelte-fdc0cb83.js","_app/immutable/assets/+page-53b26c1f.css","_app/immutable/chunks/index-46cd8f91.js"]),()=>G(()=>import("./chunks/5-8630c1ba.js"),["_app/immutable/chunks/5-8630c1ba.js","_app/immutable/components/pages/admin/images/_page.svelte-7435f47a.js","_app/immutable/assets/+page-5e53d4ff.css","_app/immutable/chunks/index-46cd8f91.js"]),()=>G(()=>import("./chunks/6-6ad1205b.js"),["_app/immutable/chunks/6-6ad1205b.js","_app/immutable/components/pages/admin/photos/_page.svelte-7ba7e9a6.js","_app/immutable/chunks/index-46cd8f91.js"]),()=>G(()=>import("./chunks/7-3d661ae4.js"),["_app/immutable/chunks/7-3d661ae4.js","_app/immutable/components/pages/auth/_page.svelte-040fe066.js","_app/immutable/assets/+page-324d4cdb.css","_app/immutable/chunks/index-46cd8f91.js","_app/immutable/chunks/Spinner-d468d9cd.js","_app/immutable/assets/Spinner-d42269c0.css"])],At={"":[[1],[0],3,1],admin:[[1],[0,2],4,1],auth:[[1],[0],7],"admin/images":[[1],[0,2],5,1],"admin/photos":[[1],[0,2],6,1]},Je="sveltekit:scroll",Y="sveltekit:index",me=_t(ae,At,Ut),Ot=ae[0](),Pt=ae[1]();let ee={};try{ee=JSON.parse(sessionStorage[Je])}catch{}function ge(s){ee[s]=be()}function It({target:s,session:e,base:n,trailing_slash:o}){var Ue;const r=[],f={url:Ce({}),page:Ce({}),navigating:se(null),session:se(e),updated:ot()},t={id:null,promise:null},a={before_navigate:[],after_navigate:[]};let i={branch:[],error:null,session_id:0,url:null},l=!1,h=!0,k=!1,P=1,B=null,R,te,ye=!1;f.session.subscribe(async c=>{te=c,!(!ye||(P+=1,!i.branch.some(g=>g==null?void 0:g.uses.session)))&&le(new URL(location.href),[])}),ye=!0;let X=!0,K=(Ue=history.state)==null?void 0:Ue[Y];K||(K=Date.now(),history.replaceState({...history.state,[Y]:K},"",location.href));const ie=ee[K];ie&&(history.scrollRestoration="manual",scrollTo(ie.x,ie.y));let oe=!1,ce,$e;async function ke(c,{noscroll:_=!1,replaceState:g=!1,keepfocus:u=!1,state:d={}},E){if(typeof c=="string"&&(c=new URL(c,Te(document))),X)return ue({url:c,scroll:_?be():null,keepfocus:u,redirect_chain:E,details:{state:d,replaceState:g},accepted:()=>{},blocked:()=>{}});await x(c)}async function Ee(c){const _=Se(c);if(!_)throw new Error("Attempted to prefetch a URL that does not belong to this app");return t.promise=Le(_),t.id=_.id,t.promise}async function le(c,_,g,u){var v,I,L;const d=Se(c),E=$e={};let p=d&&await Le(d);if(!p&&c.origin===location.origin&&c.pathname===location.pathname&&(p=await re({status:404,error:new Error(`Not found: ${c.pathname}`),url:c,routeId:null})),!p)return await x(c),!1;if(c=(d==null?void 0:d.url)||c,$e!==E)return!1;if(r.length=0,p.type==="redirect")if(_.length>10||_.includes(c.pathname))p=await re({status:500,error:new Error("Redirect loop"),url:c,routeId:null});else return X?ke(new URL(p.location,c).href,{},[..._,c.pathname]):await x(new URL(p.location,location.href)),!1;else((I=(v=p.props)==null?void 0:v.page)==null?void 0:I.status)>=400&&await f.updated.check()&&await x(c);if(k=!0,g&&g.details){const{details:S}=g,y=S.replaceState?0:1;S.state[Y]=K+=y,history[S.replaceState?"replaceState":"pushState"](S.state,"",c)}if(l?(i=p.state,p.props.page&&(p.props.page.url=c),R.$set(p.props)):Re(p),g){const{scroll:S,keepfocus:y}=g;if(!y){const b=document.body,m=b.getAttribute("tabindex");b.tabIndex=-1,b.focus({preventScroll:!0}),setTimeout(()=>{var w;(w=getSelection())==null||w.removeAllRanges()}),m!==null?b.setAttribute("tabindex",m):b.removeAttribute("tabindex")}if(await Pe(),h){const b=c.hash&&document.getElementById(c.hash.slice(1));S?scrollTo(S.x,S.y):b?b.scrollIntoView():scrollTo(0,0)}}else await Pe();t.promise=null,t.id=null,h=!0,p.props.page&&(ce=p.props.page);const $=p.state.branch.at(-1);X=((L=$==null?void 0:$.node.shared)==null?void 0:L.router)!==!1,u&&u(),k=!1}function Re(c){i=c.state;const _=document.querySelector("style[data-sveltekit]");if(_&&_.remove(),ce=c.props.page,R=new Rt({target:s,props:{...c.props,stores:f},hydrate:!0}),X){const g={from:null,to:new URL(location.href)};a.after_navigate.forEach(u=>u(g))}l=!0}async function ne({url:c,params:_,branch:g,status:u,error:d,routeId:E,validation_errors:p}){const $=g.filter(Boolean),v={type:"loaded",state:{url:c,params:_,branch:g,error:d,session_id:P},props:{components:$.map(y=>y.node.component),errors:p}};let I={},L=!1;for(let y=0;y<$.length;y+=1)Object.assign(I,$[y].data),i.branch.some(b=>b===$[y])||(v.props[`data_${y}`]=$[y].data,L=!0);if(!i.url||c.href!==i.url.href||i.error!==d||L){v.props.page={error:d,params:_,routeId:E,status:u,url:c,data:I};const y=(b,m)=>{Object.defineProperty(v.props.page,b,{get:()=>{throw new Error(`$page.${b} has been replaced by $page.url.${m}`)}})};y("origin","origin"),y("path","pathname"),y("query","searchParams")}return v}async function fe({node:c,parent:_,url:g,params:u,routeId:d,server_data:E}){var y,b;const p={params:new Set,url:!1,session:!1,dependencies:new Set,parent:!1};function $(...m){for(const w of m){const{href:N}=new URL(w,g);p.dependencies.add(N)}}let v=null;c.server&&(p.dependencies.add(g.href),p.url=!0);const I={};for(const m in u)Object.defineProperty(I,m,{get(){return p.params.add(m),u[m]},enumerable:!0});const L=te,S=new at(g);if((y=c.shared)!=null&&y.load){const m={routeId:d,params:I,data:E,get url(){return p.url=!0,S},get session(){return p.session=!0,L},async fetch(w,N){let T;typeof w=="string"?T=w:(T=w.url,N={body:w.method==="GET"||w.method==="HEAD"?void 0:await w.blob(),cache:w.cache,credentials:w.credentials,headers:w.headers,integrity:w.integrity,keepalive:w.keepalive,method:w.method,mode:w.mode,redirect:w.redirect,referrer:w.referrer,referrerPolicy:w.referrerPolicy,signal:w.signal,...N});const F=new URL(T,g).href;return $(F),l?ve(F,N):lt(T,N)},setHeaders:()=>{},depends:$,get parent(){return p.parent=!0,_},get props(){throw new Error("@migration task: Replace `props` with `data` stuff https://github.com/sveltejs/kit/discussions/5774#discussioncomment-3292693")},get stuff(){throw new Error("@migration task: Remove stuff https://github.com/sveltejs/kit/discussions/5774#discussioncomment-3292693")}};v=(b=await c.shared.load.call(null,m))!=null?b:null}return{node:c,data:v||E,uses:p}}async function Le({id:c,url:_,params:g,route:u}){if(t.id===c&&t.promise)return t.promise;const{errors:d,layouts:E,leaf:p}=u,$=i.url&&{url:c!==i.url.pathname+i.url.search,params:Object.keys(g).filter(m=>i.params[m]!==g[m]),session:P!==i.session_id};[...d,...E,p].forEach(m=>m==null?void 0:m().catch(()=>{}));const v=[...E,p],I=[];for(let m=0;m<v.length;m++)if(!v[m])I.push(!1);else{const w=i.branch[m],N=!w||$.url&&w.uses.url||$.params.some(T=>w.uses.params.has(T))||$.session&&w.uses.session||Array.from(w.uses.dependencies).some(T=>r.some(F=>F(T)))||w.uses.parent&&I.includes(!0);I.push(N)}let L=null;if(u.uses_server_data){try{const m=await ve(`${_.pathname}${_.pathname.endsWith("/")?"":"/"}__data.json${_.search}`);if(L=await m.json(),!m.ok)throw L}catch{throw new Error("TODO render fallback error page")}if(L.type==="redirect")return L}const S=L==null?void 0:L.nodes,y=v.map(async(m,w)=>Promise.resolve().then(async()=>{var Z;if(!m)return;const N=await m(),T=i.branch[w];if(I[w]||!T||N!==T.node){const q=S==null?void 0:S[w];if(q!=null&&q.status)throw nt(q.status,q.message);if(q!=null&&q.error)throw q.error;return await fe({node:N,url:_,params:g,routeId:u.id,parent:async()=>{var Oe;const Ae={};for(let de=0;de<w;de+=1)Object.assign(Ae,(Oe=await y[de])==null?void 0:Oe.data);return Ae},server_data:(Z=q==null?void 0:q.data)!=null?Z:null})}else return T}));for(const m of y)m.catch(()=>{});const b=[];for(let m=0;m<v.length;m+=1)if(v[m])try{b.push(await y[m])}catch(w){const N=w;if(N instanceof Ie)return{type:"redirect",location:N.location};const T=w instanceof he?w.status:500;for(;m--;)if(d[m]){let F,Z=m;for(;!b[Z];)Z-=1;try{return F={node:await d[m](),data:{},uses:{params:new Set,url:!1,session:!1,dependencies:new Set,parent:!1}},await ne({url:_,params:g,branch:b.slice(0,Z+1).concat(F),status:T,error:N,routeId:u.id})}catch{continue}}return await re({status:T,error:N,url:_,routeId:u.id})}else b.push(void 0);return await ne({url:_,params:g,branch:b,status:200,error:null,routeId:u.id})}async function re({status:c,error:_,url:g,routeId:u}){const d={},E=await fe({node:await Ot,url:g,params:d,routeId:u,parent:()=>Promise.resolve({}),server_data:null}),p={node:await Pt,data:null,uses:{params:new Set,url:!1,session:!1,dependencies:new Set,parent:!1}};return await ne({url:g,params:d,branch:[E,p],status:c,error:_,routeId:u})}function Se(c){if(c.origin!==location.origin||!c.pathname.startsWith(n))return;const _=decodeURI(c.pathname.slice(n.length)||"/");for(const g of me){const u=g.exec(_);if(u){const d=new URL(c.origin+rt(c.pathname,o)+c.search+c.hash);return{id:d.pathname+d.search,route:g,params:st(u),url:d}}}}async function ue({url:c,scroll:_,keepfocus:g,redirect_chain:u,details:d,accepted:E,blocked:p}){const $=i.url;let v=!1;const I={from:$,to:c,cancel:()=>v=!0};if(a.before_navigate.forEach(L=>L(I)),v){p();return}ge(K),E(),l&&f.navigating.set({from:i.url,to:c}),await le(c,u,{scroll:_,keepfocus:g,details:d},()=>{const L={from:$,to:c};a.after_navigate.forEach(S=>S(L)),f.navigating.set(null)})}function x(c){return location.href=c.href,new Promise(()=>{})}return{after_navigate:c=>{we(()=>(a.after_navigate.push(c),()=>{const _=a.after_navigate.indexOf(c);a.after_navigate.splice(_,1)}))},before_navigate:c=>{we(()=>(a.before_navigate.push(c),()=>{const _=a.before_navigate.indexOf(c);a.before_navigate.splice(_,1)}))},disable_scroll_handling:()=>{(k||!l)&&(h=!1)},goto:(c,_={})=>ke(c,_,[]),invalidate:c=>{if(c===void 0){for(const _ of i.branch)_==null||_.uses.dependencies.add("");r.push(()=>!0)}else if(typeof c=="function")r.push(c);else{const{href:_}=new URL(c,location.href);r.push(g=>g===_)}return B||(B=Promise.resolve().then(async()=>{await le(new URL(location.href),[]),B=null})),B},prefetch:async c=>{const _=new URL(c,Te(document));await Ee(_)},prefetch_routes:async c=>{const g=(c?me.filter(u=>c.some(d=>u.exec(d))):me).map(u=>Promise.all([...u.layouts,u.leaf].map(d=>d==null?void 0:d())));await Promise.all(g)},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",u=>{let d=!1;const E={from:i.url,to:null,cancel:()=>d=!0};a.before_navigate.forEach(p=>p(E)),d?(u.preventDefault(),u.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden"){ge(K);try{sessionStorage[Je]=JSON.stringify(ee)}catch{}}});const c=u=>{const d=je(u);d&&d.href&&d.hasAttribute("sveltekit:prefetch")&&Ee(De(d))};let _;const g=u=>{clearTimeout(_),_=setTimeout(()=>{var d;(d=u.target)==null||d.dispatchEvent(new CustomEvent("sveltekit:trigger_prefetch",{bubbles:!0}))},20)};addEventListener("touchstart",c),addEventListener("mousemove",g),addEventListener("sveltekit:trigger_prefetch",c),addEventListener("click",u=>{if(!X||u.button||u.which!==1||u.metaKey||u.ctrlKey||u.shiftKey||u.altKey||u.defaultPrevented)return;const d=je(u);if(!d||!d.href)return;const E=d instanceof SVGAElement,p=De(d);if(!E&&!(p.protocol==="https:"||p.protocol==="http:"))return;const $=(d.getAttribute("rel")||"").split(/\s+/);if(d.hasAttribute("download")||$.includes("external")||d.hasAttribute("sveltekit:reload")||(E?d.target.baseVal:d.target))return;const[v,I]=p.href.split("#");if(I!==void 0&&v===location.href.split("#")[0]){oe=!0,ge(K),f.page.set({...ce,url:p}),f.page.notify();return}ue({url:p,scroll:d.hasAttribute("sveltekit:noscroll")?be():null,keepfocus:!1,redirect_chain:[],details:{state:{},replaceState:p.href===location.href},accepted:()=>u.preventDefault(),blocked:()=>u.preventDefault()})}),addEventListener("popstate",u=>{if(u.state&&X){if(u.state[Y]===K)return;ue({url:new URL(location.href),scroll:ee[u.state[Y]],keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{K=u.state[Y]},blocked:()=>{const d=K-u.state[Y];history.go(d)}})}}),addEventListener("hashchange",()=>{oe&&(oe=!1,history.replaceState({...history.state,[Y]:++K},"",location.href))});for(const u of document.querySelectorAll("link"))u.rel==="icon"&&(u.href=u.href);addEventListener("pageshow",u=>{u.persisted&&f.navigating.set(null)})},_hydrate:async({status:c,error:_,node_ids:g,params:u,routeId:d})=>{const E=new URL(location.href);let p;try{const $=(S,y)=>{const b=document.querySelector(`script[sveltekit\\:data-type="${S}"]`);return b!=null&&b.textContent?JSON.parse(b.textContent):y},v=$("server_data",[]),I=$("validation_errors",void 0),L=g.map(async(S,y)=>{var b;return fe({node:await ae[S](),url:E,params:u,routeId:d,parent:async()=>{const m={};for(let w=0;w<y;w+=1)Object.assign(m,(await L[w]).data);return m},server_data:(b=v[y])!=null?b:null})});p=await ne({url:E,params:u,branch:await Promise.all(L),status:c,error:_!=null&&_.__is_http_error?new he(_.status,_.message):_,validation_errors:I,routeId:d})}catch($){const v=$;if(v instanceof Ie){await x(new URL($.location,location.href));return}p=await re({status:v instanceof he?v.status:500,error:v,url:E,routeId:d})}Re(p)}}}function Nt(s){s.client}function Dt(s){}async function Ct({paths:s,target:e,session:n,route:o,spa:r,trailing_slash:f,hydrate:t}){const a=It({target:e,session:n,base:s.base,trailing_slash:f});Nt({client:a}),it(s),t&&await a._hydrate(t),o&&(r&&a.goto(location.href,{replaceState:!0}),a._start_router()),dispatchEvent(new CustomEvent("sveltekit:start"))}export{Dt as set_public_env,Ct as start};
